<!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#fff"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>!function(e,t,o,c,i,a,n){e.DaoVoiceObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),n=t.getElementsByTagName(o)[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/0f81ff2f.js","daovoice"),daovoice("init",{app_id:"f10bbdc2"}),daovoice("update")</script><link href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.cat.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.6.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.6.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=6.6.0"><link rel="mask-icon" href="/images/logo.svg?v=6.6.0" color="#fff"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"6.6.0",sidebar:{position:"left",display:"hide",offset:12,b2t:!0,scrollpercent:!0,onmobile:!1},fancybox:!0,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="æœ€è¿‘æƒ³è¦äº†è§£ä¸€äº›å‰æ²¿æŠ€æœ¯ï¼Œä¸èƒ½ä¸€é—¨å¿ƒæ€çœ¼ä¸­åªæœ‰ webï¼Œå› ä¸ºæˆ‘ç›®å‰å¯¹ Java è¯­è¨€åŠå…¶ç”Ÿæ€ç›¸å¯¹ç†Ÿæ‚‰ï¼Œæ‰€ä»¥åœ¨ç½‘ä¸Šæœé›†äº† Hadoop ç›¸å…³æ–‡ç« ï¼Œå¹¶åšäº†æ•´åˆã€‚ æœ¬ç¯‡æ–‡ç« åœ¨äºå¯¹å¤§æ•°æ®ä»¥åŠ Hadoop æœ‰ä¸€ä¸ªç›´è§‚çš„æ¦‚å¿µï¼Œå¹¶ä¸Šæ‰‹ç®€å•ä½“éªŒã€‚"><meta name="keywords" content="å¤§æ•°æ®,Hadoop"><meta property="og:type" content="article"><meta property="og:title" content="å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰ | åˆè¯† Hadoop"><meta property="og:url" content="https://seriouszyx.top/å¤§æ•°æ®/Hadoop/2018/12/25/å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰-åˆè¯†Hadoop.html"><meta property="og:site_name" content="seriouszyx"><meta property="og:description" content="æœ€è¿‘æƒ³è¦äº†è§£ä¸€äº›å‰æ²¿æŠ€æœ¯ï¼Œä¸èƒ½ä¸€é—¨å¿ƒæ€çœ¼ä¸­åªæœ‰ webï¼Œå› ä¸ºæˆ‘ç›®å‰å¯¹ Java è¯­è¨€åŠå…¶ç”Ÿæ€ç›¸å¯¹ç†Ÿæ‚‰ï¼Œæ‰€ä»¥åœ¨ç½‘ä¸Šæœé›†äº† Hadoop ç›¸å…³æ–‡ç« ï¼Œå¹¶åšäº†æ•´åˆã€‚ æœ¬ç¯‡æ–‡ç« åœ¨äºå¯¹å¤§æ•°æ®ä»¥åŠ Hadoop æœ‰ä¸€ä¸ªç›´è§‚çš„æ¦‚å¿µï¼Œå¹¶ä¸Šæ‰‹ç®€å•ä½“éªŒã€‚"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://i.loli.net/2018/12/30/5c287655d4f10.jpg"><meta property="og:image" content="https://i.loli.net/2018/12/30/5c2876565ece1.jpg"><meta property="og:image" content="https://i.loli.net/2018/12/27/5c242519227c9.png"><meta property="og:image" content="https://i.loli.net/2018/12/27/5c2457210b58d.png"><meta property="og:image" content="https://i.loli.net/2018/12/27/5c2457214a2e2.png"><meta property="og:image" content="https://i.loli.net/2018/12/27/5c24700c97c3a.png"><meta property="og:image" content="https://i.loli.net/2018/12/30/5c28765631bc8.png"><meta property="og:image" content="https://i.loli.net/2018/12/30/5c28765664bab.png"><meta property="og:image" content="https://i.loli.net/2018/12/30/5c287656a01e5.png"><meta property="og:image" content="http://hadoop.apache.org/docs/r2.8.3/hadoop-project-dist/hadoop-hdfs/images/hdfsdatanodes.png"><meta property="og:image" content="https://www.ibm.com/developerworks/cn/opensource/os-cn-hadoop-name-node/img001.png"><meta property="og:image" content="https://i.loli.net/2018/12/30/5c28775f7eaa5.jpg"><meta property="og:updated_time" content="2019-01-02T03:06:53.537Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰ | åˆè¯† Hadoop"><meta name="twitter:description" content="æœ€è¿‘æƒ³è¦äº†è§£ä¸€äº›å‰æ²¿æŠ€æœ¯ï¼Œä¸èƒ½ä¸€é—¨å¿ƒæ€çœ¼ä¸­åªæœ‰ webï¼Œå› ä¸ºæˆ‘ç›®å‰å¯¹ Java è¯­è¨€åŠå…¶ç”Ÿæ€ç›¸å¯¹ç†Ÿæ‚‰ï¼Œæ‰€ä»¥åœ¨ç½‘ä¸Šæœé›†äº† Hadoop ç›¸å…³æ–‡ç« ï¼Œå¹¶åšäº†æ•´åˆã€‚ æœ¬ç¯‡æ–‡ç« åœ¨äºå¯¹å¤§æ•°æ®ä»¥åŠ Hadoop æœ‰ä¸€ä¸ªç›´è§‚çš„æ¦‚å¿µï¼Œå¹¶ä¸Šæ‰‹ç®€å•ä½“éªŒã€‚"><meta name="twitter:image" content="https://i.loli.net/2018/12/30/5c287655d4f10.jpg"><link rel="alternate" href="/atom.xml" title="seriouszyx" type="application/atom+xml"><link rel="canonical" href="https://seriouszyx.top/å¤§æ•°æ®/Hadoop/2018/12/25/å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰-åˆè¯†Hadoop.html"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰ | åˆè¯† Hadoop | seriouszyx</title><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">seriouszyx</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">live</p></div><div class="site-nav-toggle"> <button aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-futbol-o"></i><br>å…³äº</a></li><li class="menu-item menu-item-reading"><a href="/reading/" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i><br>è¯»ä¹¦/è§‚å½±</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>æ ‡ç­¾</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>å½’æ¡£</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>æœç´¢</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="æœç´¢..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://seriouszyx.top/å¤§æ•°æ®/Hadoop/2018/12/25/å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰-åˆè¯†Hadoop.html"><span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yixiang Zhao"><meta itemprop="description" content="Henu cs ä¸“ä¸šä¸€åæŒ£æ‰çš„åç«¯"><meta itemprop="image" content="/uploads/avatar.jpg"></span><span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="seriouszyx"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰ | åˆè¯† Hadoop</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2018-12-25 12:39:24" itemprop="dateCreated datePublished" datetime="2018-12-25T12:39:24+08:00">2018-12-25</time> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-01-02 11:06:53" itemprop="dateModified" datetime="2019-01-02T11:06:53+08:00">2019-01-02</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/å¤§æ•°æ®/" itemprop="url" rel="index"><span itemprop="name">å¤§æ•°æ®</span></a></span> ï¼Œ <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/å¤§æ•°æ®/Hadoop/" itemprop="url" rel="index"><span itemprop="name">Hadoop</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <a href="/å¤§æ•°æ®/Hadoop/2018/12/25/å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰-åˆè¯†Hadoop.html#comments" itemprop="discussionUrl"><span class="post-meta-item-text">è¯„è®ºæ•°ï¼š</span><span class="post-comments-count valine-comment-count" data-xid="/å¤§æ•°æ®/Hadoop/2018/12/25/å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰-åˆè¯†Hadoop.html" itemprop="commentCount"></span></a></span> <span id="/å¤§æ•°æ®/Hadoop/2018/12/25/å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰-åˆè¯†Hadoop.html" class="leancloud_visitors" data-flag-title="å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰ | åˆè¯† Hadoop"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><p>æœ€è¿‘æƒ³è¦äº†è§£ä¸€äº›å‰æ²¿æŠ€æœ¯ï¼Œä¸èƒ½ä¸€é—¨å¿ƒæ€çœ¼ä¸­åªæœ‰ webï¼Œå› ä¸ºæˆ‘ç›®å‰å¯¹ Java è¯­è¨€åŠå…¶ç”Ÿæ€ç›¸å¯¹ç†Ÿæ‚‰ï¼Œæ‰€ä»¥åœ¨ç½‘ä¸Šæœé›†äº† Hadoop ç›¸å…³æ–‡ç« ï¼Œå¹¶åšäº†æ•´åˆã€‚</p><p>æœ¬ç¯‡æ–‡ç« åœ¨äºå¯¹å¤§æ•°æ®ä»¥åŠ Hadoop æœ‰ä¸€ä¸ªç›´è§‚çš„æ¦‚å¿µï¼Œå¹¶ä¸Šæ‰‹ç®€å•ä½“éªŒã€‚</p><a id="more"></a><h2 id="Hadoop-åŸºç¡€æ¦‚å¿µ"><a href="#Hadoop-åŸºç¡€æ¦‚å¿µ" class="headerlink" title="Hadoop åŸºç¡€æ¦‚å¿µ"></a>Hadoop åŸºç¡€æ¦‚å¿µ</h2><p><code>Hadoop</code> æ˜¯ä¸€ä¸ªç”¨ Java å®ç°çš„å¼€æºæ¡†æ¶ï¼Œæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„è§£å†³æ–¹æ¡ˆï¼Œå°†å¤§é‡çš„ä¿¡æ¯å¤„ç†æ‰€å¸¦æ¥çš„å‹åŠ›åˆ†æ‘Šåˆ°å…¶ä»–æœåŠ¡å™¨ä¸Šã€‚</p><p>åœ¨äº†è§£å„ä¸ªåè¯ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»æŒæ¡ä¸€ç»„æ¦‚å¿µã€‚</p><h3 id="ç»“æ„åŒ–æ•°æ®-vs-éç»“æ„åŒ–æ•°æ®"><a href="#ç»“æ„åŒ–æ•°æ®-vs-éç»“æ„åŒ–æ•°æ®" class="headerlink" title="ç»“æ„åŒ–æ•°æ® vs éç»“æ„åŒ–æ•°æ®"></a>ç»“æ„åŒ–æ•°æ® vs éç»“æ„åŒ–æ•°æ®</h3><p><code>ç»“æ„åŒ–æ•°æ®</code>å³è¡Œæ•°æ®ï¼Œå­˜å‚¨åœ¨æ•°æ®åº“é‡Œï¼Œå¯ä»¥ç”¨äºŒç»´è¡¨ç»“æ„æ¥è¡¨è¾¾ï¼Œä¾‹å¦‚ï¼šåå­—ã€ç”µè¯ã€å®¶åº­ä½å€ç­‰ã€‚</p><p>å¸¸è§çš„ç»“æ„åŒ–æ•°æ®åº“ä¸º mysqlã€sqlserverã€‚</p><p><img src="https://i.loli.net/2018/12/30/5c287655d4f10.jpg" alt="zhhihu1.jpg"></p><p><code>éç»“æ„åŒ–æ•°æ®åº“</code>æ˜¯æŒ‡å…¶å­—æ®µé•¿åº¦å¯å˜ï¼Œå¹¶ä¸”æ¯ä¸ªå­—æ®µçš„è®°å½•åˆå¯ä»¥ç”±å¯é‡å¤æˆ–ä¸å¯é‡å¤çš„å­å­—æ®µæ„æˆçš„æ•°æ®åº“ã€‚æ— æ³•ç”¨ç»“æ„åŒ–çš„æ•°æ®æ¨¡å‹è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼šæ–‡æ¡£ã€å›¾ç‰‡ã€å£°éŸ³ã€è§†é¢‘ç­‰ã€‚åœ¨å¤§æ•°æ®æ—¶ä»£ï¼Œå¯¹éå…³ç³»å‹æ•°æ®åº“çš„éœ€æ±‚æ—¥ç›Šå¢åŠ ï¼Œæ•°æ®åº“æŠ€æœ¯ç›¸åº”åœ°è¿›å…¥äº†â€œåå…³ç³»æ•°æ®åº“æ—¶ä»£â€ã€‚</p><p>éç»“æ„åŒ–æ•°æ®åº“ä»£è¡¨ä¸º HBaseã€mongodbã€‚</p><p><img src="https://i.loli.net/2018/12/30/5c2876565ece1.jpg" alt="v2-27e5113596ab21aae1d64516ef015100_1200x500.jpg"></p><p>å¯ä»¥å¤§è‡´å½’çº³ï¼Œç»“æ„åŒ–æ•°æ®æ˜¯å…ˆæœ‰ç»“æ„ã€å†æœ‰æ•°æ®ï¼›éç»“æ„åŒ–æ•°æ®æ˜¯å…ˆæœ‰æ•°æ®ã€å†æœ‰ç»“æ„ã€‚</p><p>Hadoop æ˜¯å¤§æ•°æ®å­˜å‚¨å’Œè®¡ç®—çš„å¼€å±±é¼»ç¥–ï¼Œç°åœ¨å¤§å¤šæ•°å¼€æºå¤§æ•°æ®æ¡†æ¶éƒ½ä¾èµ– Hadoop æˆ–è€…ä¸å®ƒèƒ½å¾ˆå¥½åœ°å…¼å®¹ï¼Œä¸‹é¢å¼€å§‹è®²è¿° Hadoop çš„ç›¸å…³æ¦‚å¿µã€‚</p><h3 id="Hadoop-1-0-vs-Hadoop-2-0"><a href="#Hadoop-1-0-vs-Hadoop-2-0" class="headerlink" title="Hadoop 1.0 vs Hadoop 2.0"></a>Hadoop 1.0 vs Hadoop 2.0</h3><p><img src="https://i.loli.net/2018/12/27/5c242519227c9.png" alt="Hadoop-1-vs-Hadoop-2-Architecture.png"></p><h3 id="HDFS-å’Œ-MapReduce"><a href="#HDFS-å’Œ-MapReduce" class="headerlink" title="HDFS å’Œ MapReduce"></a>HDFS å’Œ MapReduce</h3><p>Hadoop ä¸ºè§£å†³<code>å­˜å‚¨</code>å’Œ<code>åˆ†æ</code>å¤§é‡æ•°æ®è€Œç”Ÿï¼Œæ‰€ä»¥è¿™ä¸¤éƒ¨åˆ†ä¹Ÿæ˜¯ Hadoop çš„ç‹­ä¹‰è¯´æ³•ï¼ˆå¹¿ä¹‰æŒ‡ Hadoop ç”Ÿæ€ï¼‰ã€‚HDFS æä¾›äº†ä¸€ç§å®‰å…¨å¯é çš„åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿï¼ŒMapReduce æä¾›äº†åŸºäºæ‰¹å¤„ç†æ¨¡å¼çš„æ•°æ®åˆ†ææ¡†æ¶ã€‚</p><p><code>HDFS</code>ï¼ˆHadoop Distributed File Systemï¼‰çš„è®¾è®¡æœ¬è´¨ä¸Šæ˜¯ä¸ºäº†å¤§é‡çš„æ•°æ®èƒ½æ¨ªè·¨å¾ˆå¤šå°æœºå™¨ï¼Œä½†æ˜¯ä½ çœ‹åˆ°çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿè€Œä¸æ˜¯å¾ˆå¤šä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚å°±å¥½æ¯”è®¿é—® <code>/hdfs/tmp/file1</code> çš„æ•°æ®ï¼Œå¼•ç”¨çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œä½†æ˜¯å®é™…æ•°æ®å¯èƒ½åˆ†å¸ƒåœ¨å¾ˆå¤šæœºå™¨ä¸Šï¼Œå½“ç„¶ HDFS ä¸ºä½ ç®¡ç†è¿™äº›æ•°æ®ï¼Œç”¨æˆ·å¹¶ä¸éœ€è¦äº†è§£å®ƒå¦‚ä½•ç®¡ç†ã€‚</p><p>å…³äº <code>MapReduce</code>ï¼Œè¿™é‡Œé€šè¿‡ä¸€ä¸ªå…·ä½“æ¨¡å‹æ¥è§£é‡Šã€‚</p><p>è€ƒè™‘å¦‚æœä½ è¦ç»Ÿè®¡ä¸€ä¸ªå·¨å¤§çš„æ–‡æœ¬æ–‡ä»¶å­˜å‚¨åœ¨ç±»ä¼¼ HDFS ä¸Šï¼Œä½ æƒ³è¦çŸ¥é“è¿™ä¸ªæ–‡æœ¬é‡Œå„ä¸ªè¯çš„å‡ºç°é¢‘ç‡ã€‚ä½ å¯åŠ¨äº†ä¸€ä¸ª MapReduce ç¨‹åºã€‚Map é˜¶æ®µï¼Œå‡ ç™¾å°æœºå™¨åŒæ—¶è¯»å–è¿™ä¸ªæ–‡ä»¶çš„å„ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æŠŠå„è‡ªè¯»åˆ°çš„éƒ¨åˆ†åˆ†åˆ«ç»Ÿè®¡å‡ºè¯é¢‘ï¼Œäº§ç”Ÿç±»ä¼¼ï¼ˆhello, 12100æ¬¡ï¼‰ï¼Œï¼ˆworldï¼Œ15214æ¬¡ï¼‰ç­‰ç­‰è¿™æ ·çš„ Pairï¼ˆæˆ‘è¿™é‡ŒæŠŠ Map å’Œ Combine æ”¾åœ¨ä¸€èµ·è¯´ä»¥ä¾¿ç®€åŒ–ï¼‰ï¼›è¿™å‡ ç™¾å°æœºå™¨å„è‡ªéƒ½äº§ç”Ÿäº†å¦‚ä¸Šçš„é›†åˆï¼Œç„¶ååˆæœ‰å‡ ç™¾å°æœºå™¨å¯åŠ¨ Reduce å¤„ç†ã€‚Reducer æœºå™¨ A å°†ä» Mapper æœºå™¨æ”¶åˆ°æ‰€æœ‰ä»¥ A å¼€å¤´çš„ç»Ÿè®¡ç»“æœï¼Œæœºå™¨ B å°†æ”¶åˆ° B å¼€å¤´çš„è¯æ±‡ç»Ÿè®¡ç»“æœï¼ˆå½“ç„¶å®é™…ä¸Šä¸ä¼šçœŸçš„ä»¥å­—æ¯å¼€å¤´åšä¾æ®ï¼Œè€Œæ˜¯ç”¨å‡½æ•°äº§ç”Ÿ Hash å€¼ä»¥é¿å…æ•°æ®ä¸²åŒ–ã€‚å› ä¸ºç±»ä¼¼ X å¼€å¤´çš„è¯è‚¯å®šæ¯”å…¶ä»–è¦å°‘å¾—å¤šï¼Œè€Œä½ ä¸å¸Œæœ›æ•°æ®å¤„ç†å„ä¸ªæœºå™¨çš„å·¥ä½œé‡ç›¸å·®æ‚¬æ®Šï¼‰ã€‚ç„¶åè¿™äº›Reducerå°†å†æ¬¡æ±‡æ€»ï¼Œï¼ˆhelloï¼Œ12100ï¼‰ï¼‹ï¼ˆhelloï¼Œ12311ï¼‰ï¼‹ï¼ˆhelloï¼Œ345881ï¼‰= ï¼ˆhelloï¼Œ370292ï¼‰ã€‚æ¯ä¸ª Reducer éƒ½å¦‚ä¸Šå¤„ç†ï¼Œä½ å°±å¾—åˆ°äº†æ•´ä¸ªæ–‡ä»¶çš„è¯é¢‘ç»“æœã€‚</p><p>è¿™å°±æ˜¯ä¸€ä¸ªç®€å•çš„ <code>WordCount</code> çš„ä¾‹å­ï¼ŒMap+Reduce è¿™ç§ç®€å•æ¨¡å‹æš´åŠ›å¥½ç”¨ï¼Œä¸è¿‡å¾ˆç¬¨é‡ï¼Œå…³äºæ›´é«˜æ•ˆçš„è§£å†³æ–¹æ³•ï¼Œä»¥åå†è¯¦ç»†æè¿°ã€‚</p><h3 id="Hadoop-æ„å»ºæ¨¡å—"><a href="#Hadoop-æ„å»ºæ¨¡å—" class="headerlink" title="Hadoop æ„å»ºæ¨¡å—"></a>Hadoop æ„å»ºæ¨¡å—</h3><p>ä¸‹é¢ä»åº•å±‚å®ç°çš„è§’åº¦è§£é‡Š HDFS å’Œ MapReduce çš„ä¸€äº›æ¦‚å¿µã€‚</p><p><code>NameNode</code> æ˜¯ Hadoop å®ˆæŠ¤è¿›ç¨‹ä¸­æœ€é‡è¦çš„ä¸€ä¸ªã€‚NameNode ä½äº HDFS çš„ä¸»ç«¯ï¼ŒæŒ‡å¯¼ DataNode æ‰§è¡Œåº•å±‚çš„ IO ä»»åŠ¡ã€‚NameNode çš„è¿è¡Œæ¶ˆè€—å¤§é‡å†…å­˜å’Œ IO èµ„æºï¼Œæ‰€ä»¥ NameNode æœåŠ¡å™¨ä¸ä¼šåŒæ—¶æ˜¯ DataNode æˆ– TaskTrackerã€‚</p><p>NameNode å’Œ <code>DataNode</code> ä¸ºä¸»/ä»ç»“æ„ï¼ˆMaster/Slaveï¼‰ã€‚æ¯ä¸€ä¸ªé›†ç¾¤ä¸Šçš„ä»èŠ‚ç‚¹éƒ½ä¼šé©»ç•™ä¸€ä¸ª DataNode å®ˆæŠ¤è¿›ç¨‹ï¼Œæ¥æ‰§è¡Œåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿçš„ç¹é‡å·¥ä½œï¼Œå°† HDFS æ•°æ®å—è¯»å–æˆ–è€…å†™å…¥åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„å®é™…æ–‡ä»¶ä¸­ã€‚å½“å¸Œæœ›å¯¹ HDFS æ–‡ä»¶è¿›è¡Œè¯»å†™æ—¶ï¼Œæ–‡ä»¶è¢«åˆ†å‰²ä¸ºå¤šä¸ªå—ï¼Œç”±NameNode å‘ŠçŸ¥å®¢æˆ·ç«¯æ¯ä¸ªæ•°æ®å—é©»ç•™åœ¨é‚£ä¸ª DataNodeã€‚å®¢æˆ·ç«¯ç›´æ¥ä¸ DataNode å®ˆæŠ¤è¿›ç¨‹é€šä¿¡ï¼Œæ¥å¤„ç†ä¸æ•°æ®å—ç›¸å¯¹åº”çš„æœ¬åœ°æ–‡ä»¶ã€‚</p><p><code>SNN</code>ï¼ˆScondary NameNodeï¼‰æ˜¯ç›‘æµ‹ HDFS é›†ç¾¤çŠ¶æ€çš„è¾…åŠ©å®ˆæŠ¤è¿›ç¨‹ã€‚SNN å¿«ç…§æœ‰åŠ©äºåŠ å°‘åœæœºçš„æ—¶é—´å¹¶é™ä½æ•°æ®ä¸¢å¤±çš„é£é™©ã€‚</p><p><code>JobTracker</code> å®ˆæŠ¤è¿›ç¨‹æ˜¯åº”ç”¨ç¨‹åºå’Œ Hadoop ä¹‹é—´çš„çº½å¸¦ã€‚ä¸€æ—¦æäº¤ä»£ç åˆ°é›†ç¾¤ä¸Šï¼ŒJobTracker å°±ä¼šç¡®å®šæ‰§è¡Œè®¡åˆ’ï¼ŒåŒ…æ‹¬å†³å®šå¤„ç†å“ªäº›æ–‡ä»¶ï¼Œä¸ºä¸åŒçš„ä»»åŠ¡åˆ†é…èŠ‚ç‚¹ä»¥åŠç›‘æ§æ‰€æœ‰ä»»åŠ¡çš„è¿è¡Œã€‚å¦‚æœä»»åŠ¡å¤±è´¥ï¼ŒJobTracker å°†è‡ªåŠ¨é‡å¯ä»»åŠ¡ï¼Œä½†æ‰€åˆ†é…çš„èŠ‚ç‚¹å¯èƒ½ä¼šä¸åŒï¼ŒåŒæ—¶å—åˆ°é¢„å®šä¹‰çš„é‡è¯•æ¬¡æ•°é™åˆ¶ã€‚æ¯ä¸€ä¸ªHadoopé›†ç¾¤åªæœ‰ä¸€ä¸ªJobTrackerå®ˆæŠ¤è¿›ç¨‹ï¼Œå®ƒé€šå¸¸è¿è¡Œåœ¨æœåŠ¡å™¨é›†ç¾¤çš„ä¸»èŠ‚ç‚¹ä¸Šã€‚</p><p>JobTracker å’Œ <code>TaskTracker</code> ä¹Ÿæ˜¯ä¸»/ä»ç»“æ„ã€‚JobTracker ä½œä¸ºä¸»èŠ‚ç‚¹ï¼Œç›‘æµ‹ MapReduce ä½œä¸šçš„æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ï¼ŒåŒæ—¶ï¼ŒTaskTracker ç®¡ç†å„ä¸ªä»»åŠ¡åœ¨æ¯ä¸ªä»èŠ‚ç‚¹ä¸Šçš„æ‰§è¡Œæƒ…å†µã€‚TaskTracker çš„ä¸€ä¸ªèŒè´£å°±æ˜¯è´Ÿè´£æŒç»­ä¸æ–­åœ°ä¸ JobTracker é€šè®¯ã€‚å¦‚æœ JobTracker åœ¨æŒ‡å®šçš„æ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æ¥è‡ª TaskTracker çš„å¿ƒè·³ï¼Œå®ƒä¼šå‡å®š TaskTracker å·²ç»å´©æºƒäº†ï¼Œè¿›è€Œé‡æ–°æäº¤ç›¸åº”çš„ä»»åŠ¡åˆ°é›†ç¾¤çš„å…¶ä»–èŠ‚ç‚¹ä¸­ã€‚</p><h2 id="å°è¯•ä½¿ç”¨-Hadoop"><a href="#å°è¯•ä½¿ç”¨-Hadoop" class="headerlink" title="å°è¯•ä½¿ç”¨ Hadoop"></a>å°è¯•ä½¿ç”¨ Hadoop</h2><p><code>Hadoop å®‰è£…</code>å¯ä»¥ç›´æ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæˆ–æ˜¯ Google ä¸€äº›ä¸é”™çš„æ•™ç¨‹ï¼Œæ¯”å¦‚ <a href="https://chu888chu888.gitbooks.io/hadoopstudy/content/Content/4/chapter0401.html" target="_blank" rel="noopener">Hadoop çš„å®‰è£…</a>ã€<a href="https://www.jianshu.com/p/de7eb61c983a" target="_blank" rel="noopener">Mac ç³»ç»Ÿå®‰è£…Hadoop 2.7.3</a>ã€‚</p><p>æŒ‰ç…§æ“ä½œé…ç½® Hadoop å¹¶æˆåŠŸè¿è¡Œï¼Œè®¿é—®<code>localhost:50070</code> å’Œ <code>localhost:8088</code> åˆ†åˆ«æ˜¾ç¤ºä¸€ä¸‹é¡µé¢ã€‚</p><p><img src="https://i.loli.net/2018/12/27/5c2457210b58d.png" alt="90496E3D-A8FB-41CE-9FF0-3B962184AFAE.png"></p><p><img src="https://i.loli.net/2018/12/27/5c2457214a2e2.png" alt="1CBC323A-55DC-40AC-B258-3725DD0D4350.png"></p><p>è¿è¡Œ<code>ä¼ªåˆ†å¸ƒå¼</code>æ ·ä¾‹ï¼š</p><p><img src="https://i.loli.net/2018/12/27/5c24700c97c3a.png" alt="31D3E6A6-5864-4C6E-865E-AE576A64E647.png"></p><h3 id="HDFS-ç›®å½•-æ–‡ä»¶æ“ä½œå‘½ä»¤"><a href="#HDFS-ç›®å½•-æ–‡ä»¶æ“ä½œå‘½ä»¤" class="headerlink" title="HDFS ç›®å½•/æ–‡ä»¶æ“ä½œå‘½ä»¤"></a>HDFS ç›®å½•/æ–‡ä»¶æ“ä½œå‘½ä»¤</h3><p>HDFS æ˜¯ä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å°†ä¸€ä¸ªå¾ˆå¤§çš„æ•°æ®é›†å­˜å‚¨ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œå¤§å¤šæ•°å…¶ä»–æ–‡ä»¶ç³»ç»Ÿæ— åŠ›äºè¿™ä¸€ç‚¹ã€‚Hadoop ä¹Ÿä¸ºå®ƒæä¾›äº†ä¸€ç§ä¸ Linux å‘½ä»¤ç±»ä¼¼çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›ç®€å•çš„æ“ä½œã€‚</p><p>Hadoop çš„<code>æ–‡ä»¶å‘½ä»¤</code>é‡‡å–çš„å½¢å¼ä¸º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -cmd &lt;args&gt;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ cmd ä¸ºå…·ä½“çš„æ–‡ä»¶å‘½ä»¤ï¼Œé€šå¸¸ä¸ UNIX å¯¹åº”çš„å‘½ä»¤åç›¸åŒï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -ls</span><br><span class="line">hadoop fs -mkdir /user/seriouszyx</span><br><span class="line">hadoop fs -lsr /</span><br><span class="line">hadoop fs -rm example.txt</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€äº›æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå’Œ HDFS äº¤äº’çš„å‘½ä»¤ï¼Œä¹Ÿç»å¸¸ä½¿ç”¨åˆ°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hadoop fs -put example.txt /user/seriouszyx</span><br><span class="line">hadoop fs -get example.txt</span><br></pre></td></tr></table></figure><h2 id="Hadoop-æ„å»ºæ¨¡å—çš„åŸç†"><a href="#Hadoop-æ„å»ºæ¨¡å—çš„åŸç†" class="headerlink" title="Hadoop æ„å»ºæ¨¡å—çš„åŸç†"></a>Hadoop æ„å»ºæ¨¡å—çš„åŸç†</h2><h3 id="MapReduce-å¦‚ä½•åˆ†è€Œæ²»ä¹‹"><a href="#MapReduce-å¦‚ä½•åˆ†è€Œæ²»ä¹‹" class="headerlink" title="MapReduce å¦‚ä½•åˆ†è€Œæ²»ä¹‹"></a>MapReduce å¦‚ä½•åˆ†è€Œæ²»ä¹‹</h3><p>MapReduce æ˜¯ç”¨æ¥å¤„ç†å¤§è§„æ¨¡æ•°æ®çš„ä¸€ä¸ªå¹¶è¡Œç¼–ç¨‹æ¡†æ¶ï¼Œé‡‡ç”¨äº†å¯¹æ•°æ®â€œåˆ†è€Œæ²»ä¹‹â€çš„æ–¹æ³•ã€‚</p><p><img src="https://i.loli.net/2018/12/30/5c28765631bc8.png" alt="40658-2de7c5066daf7ab1.png"></p><p>MapReduce æ˜¯ä¸€ä¸ªç¦»çº¿è®¡ç®—æ¡†æ¶ï¼Œå®ƒå°†è®¡ç®—åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼ŒMapï¼ˆå¹¶è¡Œå¤„ç†è¾“å…¥æ•°æ®ï¼‰å’Œ Reduceï¼ˆå¯¹ Map ç»“æœæ±‡æ€»ï¼‰ã€‚å…¶ä¸­ Map å’Œ Reduce å‡½æ•°æä¾›äº†ä¸¤ä¸ªé«˜å±‚æ¥å£ï¼Œç”±ç”¨æˆ·å»ç¼–ç¨‹å®ç°ã€‚</p><p>Map çš„ä¸€èˆ¬å¤„ç†é€»è¾‘ä¸ºï¼š<strong>(k1;v1) â€”â€”&gt;map å¤„ç†â€”â€”&gt;[(k2;v2)]</strong></p><p>Reduce å‡½æ•°çš„ä¸€èˆ¬å¤„ç†é€»è¾‘æ˜¯ï¼š<strong>(k2;[v2])â€”â€”&gt;reduce å¤„ç†â€”â€”&gt;[(k3;v3)]</strong></p><p>å¯ä»¥çœ‹å‡º map å¤„ç†çš„è¾“å‡ºä¸ reduce çš„è¾“å…¥å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œè¿™æ˜¯å› ä¸ºè¾“å…¥å‚æ•°åœ¨è¿›å…¥ reduce å‰ï¼Œä¸€èˆ¬ä¼šå°†ç›¸åŒé”® k2 ä¸‹çš„æ‰€æœ‰å€¼ v2 åˆå¹¶åˆ°ä¸€ä¸ªé›†åˆä¸­å¤„ç†ï¼š<strong>[(k2;v2)]â€”-&gt;(k2;[v2])</strong>ï¼Œè¿™ä¸ªè¿‡ç¨‹å« Combinerã€‚</p><p>åœ¨ç»è¿‡ Map å’Œ Reduce çš„æŠ½è±¡åï¼Œå¹¶è¡Œç»“æ„æ¨¡å‹å°±å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š</p><p><img src="https://i.loli.net/2018/12/30/5c28765664bab.png" alt="40658-df82b7a1775fac75.png"></p><p>ä¸Šå›¾ä¸­å¯ä»¥å‘ç°ï¼Œä¸­é—´æœ‰ä¸€ä¸ªåŒæ­¥éšœï¼ˆBarrierï¼‰ï¼Œå…¶ä½œç”¨æ˜¯ç­‰æ‰€æœ‰çš„ map èŠ‚ç‚¹å¤„ç†å®Œåæ‰è¿›å…¥ reduceï¼Œå¹¶ä¸”è¿™ä¸ªé˜¶æ®µåŒæ—¶è¿›è¡Œæ•°æ®åŠ å·¥æ•´ç†è¿‡ç¨‹ï¼ˆAggregation &amp; Shuffleï¼‰ï¼Œä»¥ä¾¿ reduce èŠ‚ç‚¹å¯ä»¥å®Œå…¨åŸºäºæœ¬èŠ‚ç‚¹ä¸Šçš„æ•°æ®è®¡ç®—æœ€ç»ˆç»“æœã€‚</p><p>ä¸è¿‡è¿™ä»ç„¶ä¸æ˜¯å®Œæ•´çš„ MapReduce æ¨¡å‹ï¼Œåœ¨ä¸Šè¿°æ¡†æ¶å›¾ä¸­ï¼Œè¿˜å°‘äº†ä¸¤ä¸ªæ­¥éª¤ Combiner å’Œ Partitionerã€‚</p><p><img src="https://i.loli.net/2018/12/30/5c287656a01e5.png" alt="40658-39cc7b851195657c.png"></p><p>ä¸Šè¿°å›¾ä»¥<code>è¯é¢‘ç»Ÿè®¡ï¼ˆWordCountï¼‰</code>ä¸ºä¾‹ã€‚</p><p><strong>Combiner</strong> ç”¨æ¥å¯¹ä¸­é—´ç»“æœæ•°æ®ç½‘ç»œä¼ è¾“è¿›è¡Œä¼˜åŒ–ï¼Œæ¯”å¦‚ map å¤„ç†å®Œè¾“å‡ºå¾ˆå¤šé”®å€¼å¯¹åï¼ŒæŸäº›é”®å€¼å¯¹çš„é”®æ˜¯ç›¸åŒçš„ï¼ŒCombiner å°±ä¼šå°†ç›¸åŒçš„é”®åˆå¹¶ï¼Œæ¯”å¦‚æœ‰ä¸¤ä¸ªé”®å€¼å¯¹çš„é”®ç›¸åŒï¼ˆgoodï¼Œ1ï¼‰å’Œï¼ˆgoodï¼Œ2ï¼‰ï¼Œä¾¿å¯ä»¥åˆæˆ(good,3)ã€‚</p><p>è¿™æ ·ï¼Œå¯ä»¥å‡å°‘éœ€è¦ä¼ è¾“çš„ä¸­é—´ç»“æœæ•°æ®é‡ï¼Œæ‰“å€’ç½‘ç»œæ•°æ®ä¼ è¾“ä¼˜åŒ–ï¼Œå› ä¸º map ä¼ ç»™ reduce æ˜¯é€šè¿‡ç½‘ç»œæ¥ä¼ çš„ã€‚</p><p><strong>Partitioner</strong> è´Ÿè´£å¯¹ä¸­é—´ç»“æœè¿›è¡Œåˆ†åŒºå¤„ç†ã€‚æ¯”å¦‚è¯é¢‘ç»Ÿè®¡ï¼Œå°†æ‰€æœ‰ä¸»é”®ç›¸åŒçš„é”®å€¼å¯¹ä¼ è¾“ç»™åŒä¸€ä¸ª Reduce èŠ‚ç‚¹ï¼Œä»¥ä¾¿ Reduce èŠ‚ç‚¹ä¸éœ€è¦è®¿é—®å…¶ä»– Reduce èŠ‚ç‚¹çš„æƒ…å†µä¸‹ï¼Œä¸€æ¬¡æ€§å¯¹åˆ†è¿‡æ¥çš„ä¸­é—´ç»“æœè¿›è¡Œå¤„ç†ã€‚</p><h3 id="å‰¯æœ¬æœºåˆ¶"><a href="#å‰¯æœ¬æœºåˆ¶" class="headerlink" title="å‰¯æœ¬æœºåˆ¶"></a>å‰¯æœ¬æœºåˆ¶</h3><p>æˆ‘ä»¬å†è¯´å› HDFS è¯ç”Ÿçš„åŸå› ï¼Œhdfs ç”± Google æœ€å…ˆç ”å‘ï¼Œå…¶éœ€æ±‚æ˜¯å•ç‹¬ä¸€å°è®¡ç®—æœºæ‰€èƒ½å­˜å‚¨çš„ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œè€Œéšç€è®¡ç®—æœºå­˜å‚¨ç©ºé—´çš„åŠ å¤§ï¼Œå…¶ä»·æ ¼æ˜¯å‘ˆå‡ ä½•å€çš„å¢é•¿ã€‚è€Œ hdfs æ¶æ„åœ¨ç›¸å¯¹å»‰ä»·çš„è®¡ç®—æœºä¸Šï¼Œä»¥åˆ†å¸ƒå¼çš„æ–¹å¼ï¼Œè¿™æ ·æƒ³è¦æ‰©å¤§ç©ºé—´ä¹‹é¥å¢åŠ é›†ç¾¤çš„æ•°é‡å°±å¯ä»¥äº†ã€‚</p><p>å¤§é‡ç›¸å¯¹å»‰ä»·çš„è®¡ç®—æœºï¼Œé‚£ä¹ˆè¯´æ˜<strong>å®•æœº</strong>å°±æ˜¯ä¸€ç§å¿…ç„¶äº‹ä»¶ï¼Œæˆ‘ä»¬éœ€è¦è®©æ•°æ®é¿å…ä¸¢å¤±ï¼Œå°±åªç”¨é‡‡å–å†—ä½™æ•°æ®å­˜å‚¨ï¼Œè€Œå…·ä½“çš„å®ç°çš„å°±æ˜¯<code>å‰¯æœ¬æœºåˆ¶</code>ã€‚</p><p><img src="http://hadoop.apache.org/docs/r2.8.3/hadoop-project-dist/hadoop-hdfs/images/hdfsdatanodes.png" alt=""></p><p>hdfs ä¸»è¦ä½¿ç”¨<code>ä¸‰å‰¯æœ¬æœºåˆ¶</code></p><ul><li>ç¬¬ä¸€å‰¯æœ¬ï¼šå¦‚æœä¸Šä¼ èŠ‚ç‚¹æ˜¯ DNï¼Œåˆ™ä¸Šä¼ è¯¥èŠ‚ç‚¹ï¼›å¦‚æœä¸Šä¼ èŠ‚ç‚¹æ˜¯ NNï¼Œåˆ™éšæœºé€‰æ‹© DN</li><li>ç¬¬äºŒå‰¯æœ¬ï¼šæ”¾ç½®åœ¨ä¸åŒæœºæ¶çš„ DN ä¸Š</li><li>ç¬¬ä¸‰å‰¯æœ¬ï¼šæ”¾ç½®åœ¨ä¸ç¬¬äºŒå‰¯æœ¬ç›¸åŒæœºæ¶çš„ä¸åŒ DN ä¸Š</li></ul><p>é™¤äº†æå¤§ç¨‹åº¦åœ°é¿å…å®•æœºæ‰€é€ æˆçš„æ•°æ®æŸå¤±ï¼Œå‰¯æœ¬æœºåˆ¶è¿˜å¯ä»¥åœ¨æ•°æ®è¯»å–æ—¶è¿›è¡Œæ•°æ®æ ¡éªŒã€‚</p><h3 id="NameNode-åœ¨åšäº›ä»€ä¹ˆ"><a href="#NameNode-åœ¨åšäº›ä»€ä¹ˆ" class="headerlink" title="NameNode åœ¨åšäº›ä»€ä¹ˆ"></a>NameNode åœ¨åšäº›ä»€ä¹ˆ</h3><p>åœ¨ Hadoop 1.0 æ—¶ä»£ï¼ŒHadoop ä¸¤å¤§æ ¸å¿ƒç»„ä»¶ HDFS NameNode å’Œ JobTracker éƒ½å­˜åœ¨ç€å•ç‚¹é—®é¢˜ï¼Œå…¶ä¸­ä»¥ NameNode æœ€ä¸ºä¸¥é‡ã€‚å› ä¸º <code>NameNode ä¿å­˜äº†æ•´ä¸ª HDFS çš„å…ƒæ•°æ®ä¿¡æ¯</code>ï¼Œä¸€æ—¦ NameNode æŒ‚æ‰ï¼Œæ•´ä¸ª HDFS å°±æ— æ³•è®¿é—®ï¼ŒåŒæ—¶ Hadoop ç”Ÿæ€ç³»ç»Ÿä¸­ä¾èµ–äº HDFS çš„å„ä¸ªç»„ä»¶ï¼ŒåŒ…æ‹¬ MapReduceã€Hiveã€Pig ä»¥åŠ HBase ç­‰ä¹Ÿéƒ½æ— æ³•æ­£å¸¸å·¥ä½œï¼Œå¹¶ä¸”é‡æ–°å¯åŠ¨ NameNode å’Œè¿›è¡Œæ•°æ®æ¢å¤çš„è¿‡ç¨‹ä¹Ÿä¼šæ¯”è¾ƒè€—æ—¶ã€‚</p><p>è¿™äº›é—®é¢˜åœ¨ç»™ Hadoop çš„ä½¿ç”¨è€…å¸¦æ¥å›°æ‰°çš„åŒæ—¶ï¼Œä¹Ÿæå¤§åœ°é™åˆ¶äº† Hadoop çš„ä½¿ç”¨åœºæ™¯ï¼Œä½¿å¾— Hadoop åœ¨å¾ˆé•¿çš„æ—¶é—´å†…ä»…èƒ½ç”¨ä½œç¦»çº¿å­˜å‚¨å’Œç¦»çº¿è®¡ç®—ï¼Œæ— æ³•åº”ç”¨åˆ°å¯¹å¯ç”¨æ€§å’Œæ•°æ®ä¸€è‡´æ€§è¦æ±‚å¾ˆé«˜çš„åœ¨çº¿åº”ç”¨åœºæ™¯ä¸­ã€‚</p><p>æ‰€å¹¸çš„æ˜¯ï¼Œåœ¨ Hadoop2.0 ä¸­ï¼ŒHDFS NameNode å’Œ YARN ResourceManger(JobTracker åœ¨ 2.0 ä¸­å·²ç»è¢«æ•´åˆåˆ° YARN ResourceManger ä¹‹ä¸­) çš„å•ç‚¹é—®é¢˜éƒ½å¾—åˆ°äº†è§£å†³ï¼Œç»è¿‡å¤šä¸ªç‰ˆæœ¬çš„è¿­ä»£å’Œå‘å±•ï¼Œç›®å‰å·²ç»èƒ½ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚</p><p><img src="https://www.ibm.com/developerworks/cn/opensource/os-cn-hadoop-name-node/img001.png" alt=""></p><p>ä»ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸¤å° NameNodeâ€”â€”Active NameNode å’Œ Standby NameNodeï¼Œä¸€å°å¤„äº Active çŠ¶æ€ï¼Œä¸ºä¸» NameNodeï¼Œå¦å¤–ä¸€å°å¤„äº Standby çŠ¶æ€ï¼Œä¸ºå¤‡ NameNodeï¼Œåªæœ‰ä¸» NameNode æ‰èƒ½å¯¹å¤–æä¾›è¯»å†™æœåŠ¡ã€‚</p><h3 id="Yarn"><a href="#Yarn" class="headerlink" title="Yarn"></a>Yarn</h3><p><code>Yarn</code> æ˜¯ Hadoop é›†ç¾¤çš„æ–°ä¸€ä»£èµ„æºç®¡ç†ç³»ç»Ÿã€‚Hadoop 2.0 å¯¹ MapReduce æ¡†æ¶åšäº†å½»åº•çš„è®¾è®¡é‡æ„ï¼Œæˆ‘ä»¬ç§° Hadoop 2.0 ä¸­çš„ MapReduce ä¸º MRv2 æˆ–è€… Yarnã€‚</p><p><img src="https://i.loli.net/2018/12/30/5c28775f7eaa5.jpg" alt="20151029092726524 (2).jpg"></p><p>åœ¨ Hadoop 2.x ä¸­ï¼ŒYarn æŠŠ job çš„æ¦‚å¿µæ¢æˆäº† <code>application</code>ï¼Œå› ä¸ºè¿è¡Œçš„åº”ç”¨ä¸åªæ˜¯ MapReduce äº†ï¼Œè¿˜å¯èƒ½æ˜¯å…¶ä»–åº”ç”¨ï¼Œå¦‚ä¸€ä¸ª DAGï¼ˆæœ‰å‘æ— ç¯å›¾ Directed Acyclic Graphï¼Œä¾‹å¦‚ Storm åº”ç”¨ï¼‰ã€‚</p><p>Yarn å¦ä¸€ä¸ªç›®æ ‡æ˜¯æ‰©å±• Hadoopï¼Œä½¿å¾—å®ƒä¸ä»…ä»…å¯ä»¥æ”¯æŒ MapReduce è®¡ç®—ï¼Œè¿˜èƒ½å¾ˆæ–¹ä¾¿åœ°ç®¡ç†è¯¸å¦‚ Hiveã€Pigã€Hbaseã€Spark/Shark ç­‰åº”ç”¨ã€‚</p><p>è¿™ç§æ–°çš„æ¶æ„è®¾è®¡èƒ½å¤Ÿä½¿å¾—å„ç§ç±»å‹çš„åº”ç”¨è¿è¡Œåœ¨ Hadoop ä¸Šé¢ï¼Œå¹¶é€šè¿‡ Yarn ä»ç³»ç»Ÿå±‚é¢è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰äº† Yarnï¼Œ<strong>å„ç§åº”ç”¨å°±å¯ä»¥äº’ä¸å¹²æ‰°çš„è¿è¡Œåœ¨åŒä¸€ä¸ª Hadoop ç³»ç»Ÿä¸­</strong>ï¼Œå…±äº«æ•´ä¸ªé›†ç¾¤èµ„æºã€‚</p><h3 id="ResourceManager-åœ¨åšäº›ä»€ä¹ˆ"><a href="#ResourceManager-åœ¨åšäº›ä»€ä¹ˆ" class="headerlink" title="ResourceManager åœ¨åšäº›ä»€ä¹ˆ"></a>ResourceManager åœ¨åšäº›ä»€ä¹ˆ</h3><p>åˆšåˆšæåˆ°çš„ Yarn ä¹Ÿé‡‡ç”¨äº† Master/Slave ç»“æ„ï¼Œå…¶ä¸­ Master ä¸º <strong>ResourceManager</strong>ï¼Œè´Ÿè´£æ•´ä¸ªé›†ç¾¤çš„èµ„æºç®¡ç†ä¸è°ƒåº¦ï¼›Slave å®ç°ä¸º <strong>NodeManager</strong>ï¼Œè´Ÿè´£å•ä¸ªèŠ‚ç‚¹çš„ç»„å‘˜ç®¡ç†ä¸ä»»åŠ¡å¯åŠ¨ã€‚</p><p>ResourceManager æ˜¯æ•´ä¸ª Yarn é›†ç¾¤ä¸­æœ€é‡è¦çš„ç»„ä»¶ä¹‹ä¸€ï¼Œå®ƒçš„åŠŸèƒ½è¾ƒå¤šï¼ŒåŒ…æ‹¬ ApplicationMaster ç®¡ç†ï¼ˆå¯åŠ¨ã€åœæ­¢ç­‰ï¼‰ã€NodeManager ç®¡ç†ã€Application ç®¡ç†ã€çŠ¶æ€æœºç®¡ç†ç­‰ã€‚</p><p>ResourceManager ä¸»è¦å®Œæˆä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š</p><ul><li>ä¸å®¢æˆ·ç«¯äº¤äº’ï¼Œå¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚</li><li>å¯åŠ¨å’Œç®¡ç† ApplicationMasterï¼Œå¹¶åœ¨å®ƒå¤±è´¥æ—¶é‡æ–°å¯åŠ¨å®ƒ</li><li>ç®¡ç† NodeManagerï¼Œæ¥å—æ¥è‡ª NodeManager çš„èµ„æºç®¡ç†æ±‡æŠ¥ä¿¡æ¯ï¼Œå¹¶å‘ NodeManager ä¸‹è¾¾ç®¡ç†å‘½ä»¤æˆ–æŠŠä¿¡æ¯æŒ‰ç…§ä¸€å®šçš„ç­–ç•¥åˆ†é…ç»™å„ä¸ªåº”ç”¨ç¨‹åºï¼ˆApplicationManagerï¼‰ç­‰</li><li><strong>èµ„æºç®¡ç†ä¸è°ƒåº¦ï¼Œæ¥å—æ¥è‡ª ApplicationMaster çš„èµ„æºç”³è¯·è¯·æ±‚ï¼Œå¹¶ä¸ºä¹‹åˆ†é…èµ„æºï¼ˆæ ¸å¿ƒï¼‰</strong></li></ul><p>åœ¨ Master/Slave æ¶æ„ä¸­ï¼ŒResourceManager åŒæ ·å­˜åœ¨å•ç‚¹æ•…éšœï¼ˆé«˜å¯ç”¨é—®é¢˜ï¼ŒHigh Availabilityï¼‰é—®é¢˜ã€‚ä¸ºäº†è§£å†³å®ƒï¼Œé€šå¸¸é‡‡ç”¨çƒ­å¤‡æ–¹æ¡ˆï¼Œå³é›†ç¾¤ä¸­å­˜åœ¨ä¸€ä¸ªå¯¹å¤–æœåŠ¡çš„ Active Master å’Œè‹¥å¹²ä¸ªå¤„äºå°±ç»ªçŠ¶æ€çš„ Standy Masterï¼Œä¸€æ—¦ Active Master å‡ºç°æ•…<br>éšœï¼Œç«‹å³é‡‡ç”¨ä¸€å®šçš„ä¾§ç‡é€‰å–æŸä¸ª Standy Master è½¬æ¢ä¸º Active Master ä»¥æ­£å¸¸å¯¹å¤–æä¾›æœåŠ¡ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº† Hadoop çš„ç›¸å…³æ¦‚å¿µï¼ŒåŒ…æ‹¬é‡å¤§æ ¸å¿ƒéƒ¨ä»¶ HDFS å’Œ MapReduceï¼Œå¹¶å¯¹å…¶è¿›è¡Œäº†è¿›ä¸€æ­¥å‰–æï¼ŒHadoop 2.0 çš„ Yarn çš„ç®€å•ä»‹ç»ï¼Œä»¥åŠä¸€äº›é—®é¢˜çš„è§£å†³æ–¹æ³•ï¼ˆå¦‚ HAï¼‰ã€‚</p><p>ä¹Ÿé€šè¿‡é…ç½®ç¬¬ä¸€æ¬¡åœ¨æœ¬æœºä¸Šé…ç½®äº† Hadoop çš„è¿è¡Œç¯å¢ƒï¼Œè¿è¡Œäº†ä¼ªåˆ†å¸ƒå¼æ ·ä¾‹ã€‚</p><p>æ¥ä¸‹æ¥ä¼šç»“åˆä¸€ä¸ªå…·ä½“é—®é¢˜æ·±å…¥ç†è§£ Hadoop çš„æ–¹æ–¹é¢é¢ã€‚</p><p><br></p><blockquote><p> References:<br> <a href="https://chu888chu888.gitbooks.io/hadoopstudy/content/" target="_blank" rel="noopener">å¤§æ•°æ®å­¦ä¹ ç¬”è®°</a><br> <a href="https://zhuanlan.zhihu.com/p/26545566" target="_blank" rel="noopener">ä¸€æ–‡è¯»æ‡‚å¤§æ•°æ®å¹³å°â€”â€”å†™ç»™å¤§æ•°æ®å¼€å‘åˆå­¦è€…çš„è¯!</a><br> <a href="https://www.jianshu.com/p/ed6b35f52e3c" target="_blank" rel="noopener">Hadoop HDFSå’ŒMapReduce</a><br> <a href="http://pangjiuzala.github.io/2015/08/03/HDFS%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/" target="_blank" rel="noopener">HDFSæ–‡ä»¶æ“ä½œ</a><br> <a href="https://www.jianshu.com/p/35be7bdca902" target="_blank" rel="noopener">hadoopç¬”è®°4â€”MapReduceæ¡†æ¶</a><br> <a href="https://blog.csdn.net/suifeng3051/article/details/49486927" target="_blank" rel="noopener">Hadoop Yarnè¯¦è§£</a><br> <a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-hadoop-name-node/index.html" target="_blank" rel="noopener">Hadoop NameNode é«˜å¯ç”¨ (High Availability) å®ç°è§£æ</a><br><a href="https://blog.csdn.net/zhangzhebjut/article/details/37730065" target="_blank" rel="noopener">Hadoop -YARN ResourceManager å‰–æ</a></p></blockquote><hr></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------æœ¬æ–‡ç»“æŸ<i class="fa fa-paw"></i>æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------</div></div></div><div><div class="my_post_copyright"><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script><script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script><p><span>æœ¬æ–‡æ ‡é¢˜:</span><a href="/å¤§æ•°æ®/Hadoop/2018/12/25/å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰-åˆè¯†Hadoop.html">å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰ | åˆè¯† Hadoop</a></p><p><span>æ–‡ç« ä½œè€…:</span><a href="/" title="è®¿é—® Yixiang Zhao çš„ä¸ªäººåšå®¢">Yixiang Zhao</a></p><p><span>å‘å¸ƒæ—¶é—´:</span>2018å¹´12æœˆ25æ—¥ - 12:39</p><p><span>æœ€åæ›´æ–°:</span>2019å¹´01æœˆ02æ—¥ - 11:06</p><p><span>åŸå§‹é“¾æ¥:</span><a href="/å¤§æ•°æ®/Hadoop/2018/12/25/å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰-åˆè¯†Hadoop.html" title="å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰ | åˆè¯† Hadoop">https://seriouszyx.top/å¤§æ•°æ®/Hadoop/2018/12/25/å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰-åˆè¯†Hadoop.html</a><span class="copy-path" title="ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æ¥"><i class="fa fa-clipboard" data-clipboard-text="https://seriouszyx.top/å¤§æ•°æ®/Hadoop/2018/12/25/å¤§æ•°æ®å­¦ä¹ ï¼ˆä¸€ï¼‰-åˆè¯†Hadoop.html" aria-label="å¤åˆ¶æˆåŠŸï¼"></i></span></p><p><span>è®¸å¯åè®®:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç» 4.0 å›½é™…</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚</p></div><script>var clipboard=new Clipboard(".fa-clipboard");$(".fa-clipboard").click(function(){clipboard.on("success",function(){swal({title:"",text:"å¤åˆ¶æˆåŠŸ",icon:"success",showConfirmButton:!0})})})</script></div><footer class="post-footer"><div class="post-tags"><a href="/tags/å¤§æ•°æ®/" rel="tag"><i class="fa fa-tag"></i> å¤§æ•°æ®</a><a href="/tags/Hadoop/" rel="tag"><i class="fa fa-tag"></i> Hadoop</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/å…¬å¼€è¯¾/2019/01/06/ã€ŠAlgorithms-Part-1ã€‹Programming-Assignment-1-Percolation.html" rel="prev" title="ã€ŠAlgorithms,Part 1ã€‹Programming Assignment 1: Percolation"><i class="fa fa-chevron-left"></i> ã€ŠAlgorithms,Part 1ã€‹Programming Assignment 1: Percolation</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/å¤§å­¦ç”Ÿæ´»/2018/12/10/æ€»ç»“-å±•æœ›-ä¸–ç•Œä¸ä¼šå› ä¸ºä½ çš„æ— çŸ¥è€Œåœä¸‹è„šæ­¥.html" rel="next" title="[æ€»ç»“|å±•æœ›] ä¸–ç•Œä¸ä¼šå› ä¸ºä½ çš„æ— çŸ¥è€Œåœä¸‹è„šæ­¥">[æ€»ç»“|å±•æœ›] ä¸–ç•Œä¸ä¼šå› ä¸ºä½ çš„æ— çŸ¥è€Œåœä¸‹è„šæ­¥<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> ç«™ç‚¹æ¦‚è§ˆ</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <a href="/"><img class="site-author-image" itemprop="image" src="/uploads/avatar.jpg" alt="Yixiang Zhao"></a><p class="site-author-name" itemprop="name">Yixiang Zhao</p><p class="site-description motion-element" itemprop="description">Henu cs ä¸“ä¸šä¸€åæŒ£æ‰çš„åç«¯</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"> <span class="site-state-item-count">6</span> <span class="site-state-item-name">åˆ†ç±»</span></div><div class="site-state-item site-state-tags"> <span class="site-state-item-count">13</span> <span class="site-state-item-name">æ ‡ç­¾</span></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/seriouszyx" title="GitHub &rarr; https://github.com/seriouszyx" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a></span><span class="links-of-author-item"><a href="mailto:seriouszyx@gmail.com" title="E-Mail &rarr; mailto:seriouszyx@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a></span><span class="links-of-author-item"><a href="https://plus.google.com/seriouszyx" title="Google &rarr; https://plus.google.com/seriouszyx" rel="noopener" target="_blank"><i class="fa fa-fw fa-google"></i></a></span><span class="links-of-author-item"><a href="https://twitter.com/seriouszyx1" title="Twitter &rarr; https://twitter.com/seriouszyx1" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i></a></span></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Hadoop-åŸºç¡€æ¦‚å¿µ"><span class="nav-number">1.</span> <span class="nav-text">Hadoop åŸºç¡€æ¦‚å¿µ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ç»“æ„åŒ–æ•°æ®-vs-éç»“æ„åŒ–æ•°æ®"><span class="nav-number">1.1.</span> <span class="nav-text">ç»“æ„åŒ–æ•°æ® vs éç»“æ„åŒ–æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hadoop-1-0-vs-Hadoop-2-0"><span class="nav-number">1.2.</span> <span class="nav-text">Hadoop 1.0 vs Hadoop 2.0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HDFS-å’Œ-MapReduce"><span class="nav-number">1.3.</span> <span class="nav-text">HDFS å’Œ MapReduce</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hadoop-æ„å»ºæ¨¡å—"><span class="nav-number">1.4.</span> <span class="nav-text">Hadoop æ„å»ºæ¨¡å—</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å°è¯•ä½¿ç”¨-Hadoop"><span class="nav-number">2.</span> <span class="nav-text">å°è¯•ä½¿ç”¨ Hadoop</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HDFS-ç›®å½•-æ–‡ä»¶æ“ä½œå‘½ä»¤"><span class="nav-number">2.1.</span> <span class="nav-text">HDFS ç›®å½•/æ–‡ä»¶æ“ä½œå‘½ä»¤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hadoop-æ„å»ºæ¨¡å—çš„åŸç†"><span class="nav-number">3.</span> <span class="nav-text">Hadoop æ„å»ºæ¨¡å—çš„åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MapReduce-å¦‚ä½•åˆ†è€Œæ²»ä¹‹"><span class="nav-number">3.1.</span> <span class="nav-text">MapReduce å¦‚ä½•åˆ†è€Œæ²»ä¹‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å‰¯æœ¬æœºåˆ¶"><span class="nav-number">3.2.</span> <span class="nav-text">å‰¯æœ¬æœºåˆ¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NameNode-åœ¨åšäº›ä»€ä¹ˆ"><span class="nav-number">3.3.</span> <span class="nav-text">NameNode åœ¨åšäº›ä»€ä¹ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Yarn"><span class="nav-number">3.4.</span> <span class="nav-text">Yarn</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ResourceManager-åœ¨åšäº›ä»€ä¹ˆ"><span class="nav-number">3.5.</span> <span class="nav-text">ResourceManager åœ¨åšäº›ä»€ä¹ˆ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ€»ç»“"><span class="nav-number">4.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></div></div></section><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2018 â€“ <span itemprop="copyrightYear">2019</span><span class="with-love" id="animate"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">Yixiang Zhao</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv" title="æ€»è®¿å®¢é‡"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span><span class="site-pv" title="æ€»è®¿é—®é‡"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.ui.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=6.6.0"></script><script type="text/javascript" src="/js/src/motion.js?v=6.6.0"></script><script type="text/javascript" src="/js/src/affix.js?v=6.6.0"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.6.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=6.6.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=6.6.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=6.6.0"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script type="text/javascript">var GUEST=["nick","mail","link"],guest="nick,mail,link";guest=guest.split(",").filter(function(e){return-1<GUEST.indexOf(e)}),new Valine({el:"#comments",verify:!1,notify:!1,appId:"6dpTn64BlB3dEdcvG7RI4pMo-gzGzoHsz",appKey:"rIRTS8vIL6Jx02cXPihaHN4c",placeholder:"æƒ³è¯´äº›ä»€ä¹ˆğŸ",avatar:"mm",meta:guest,pageSize:"10",visitor:!1})</script><script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script>
    
    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function ({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
            Counter('put', `/classes/Counter/${counter.objectId}`, JSON.stringify({ time: { "__op":"Increment", "amount":1 } }))
            
            .done(function () {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.time + 1);
            })
            
            .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
            })
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! See more at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see here how to solve it: https://github.com/theme-next/hexo-leancloud-counter-security. \n But you also can use LeanCloud without security, by set \'security\' option to \'false\'.');
            
          }
        })
      .fail(function ({ responseJSON }) {
        console.log('LeanCloud Counter Error:' + responseJSON.code + " " + responseJSON.error);
      });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + "MmSyFSMUtk82Pt4lr13xBBNY-gzGzoHsz")
        .done(function ({ api_server }) {
          var Counter = function (method, url, data) {
            return $.ajax({
              method: method,
              url: `https://${api_server}/1.1${url}`,
              headers: {
                'X-LC-Id': "MmSyFSMUtk82Pt4lr13xBBNY-gzGzoHsz",
                'X-LC-Key': "z7moP8rXW5J0y9ah7m5iFJ9F",
                'Content-Type': 'application/json',
              },
              data: data,
            });
          };
          
          addCount(Counter);
          
        })
    });
  </script></body></html>